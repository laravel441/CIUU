<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Claro - Actividades Econ贸micas</title>
    <link rel="stylesheet" href="/static/style.css?v=1.3">
</head>

<body>
    <div class="container">
        <header>
            <div class="logo-section">
                <svg width="42" height="42" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                        fill="#da291c" />
                    <path
                        d="M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z"
                        fill="white" />
                </svg>
                <h1>Actividades Econ贸micas</h1>
            </div>
            <p class="subtitle">Consulta de c贸digos de actividad comercial en tiempo real desde APIM Calidad Claro.</p>
            <div style="margin-top: 1.5rem;">
                <div class="status-badge" id="statusBadge">Conectando servicio...</div>
            </div>
        </header>

        <main class="card">
            <!-- Tabs / Filter -->
            <div class="main-tabs">
                <button class="tab-btn active" id="tabCIUU">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    <span>Actividades CIUU</span>
                </button>
                <button class="tab-btn" id="tabNIT">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="8.5" cy="7" r="4"></circle>
                        <line x1="20" y1="8" x2="20" y2="14"></line>
                        <line x1="23" y1="11" x2="17" y2="11"></line>
                    </svg>
                    <span>Consulta por NIT</span>
                </button>
            </div>

            <!-- CIUU Search (Existing) -->
            <section class="search-container" id="ciuuSearch">
                <div class="search-wrapper">
                    <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                    <input type="text" id="searchInput" class="search-input"
                        placeholder="Buscar por c贸digo (ej. 0111) o palabra clave...">
                </div>
            </section>

            <!-- NIT Search (New) -->
            <section class="search-container" id="nitSearch" style="display: none;">
                <div class="search-wrapper nit-wrapper">
                    <input type="text" id="nitInput" class="search-input"
                        placeholder="Ingresa NIT (ej: 959595-3 o 'err' para demo)...">
                    <button class="action-btn" onclick="searchByNIT()">Consultar</button>
                </div>
                <p class="demo-notice" id="demoNotice"
                    style="display: none; color: var(--text-muted); font-size: 0.8rem; margin-top: 0.5rem; text-align: center;">
                     En Render se muestra una simulaci贸n por falta de mTLS. Prueba con "9595" o "error".
                </p>
            </section>

            <div class="table-viewport">
                <table id="dataTable" style="display: none;">
                    <thead>
                        <tr>
                            <th>C贸digo</th>
                            <th>Descripci贸n</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Content dynamic -->
                    </tbody>
                </table>

                <!-- Skeleton Loader -->
                <div id="loader" class="loader-content">
                    <div class="skeleton-row"></div>
                    <div class="skeleton-row"></div>
                    <div class="skeleton-row"></div>
                </div>

                <!-- Error State -->
                <div id="errorContainer" style="display: none; padding: 3rem; text-align: center;">
                    <h3 style="color: var(--error); margin-bottom: 0.5rem;">Error de conexi贸n</h3>
                    <p id="errorMessage" style="color: var(--text-secondary); margin-bottom: 1.5rem;"></p>
                    <button class="retry-btn" onclick="fetchData()"
                        style="padding: 0.6rem 1.5rem; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Reintentar</button>
                </div>

                <!-- Empty State -->
                <div id="emptyState" style="display: none; padding: 4rem 2rem; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;"></div>
                    <p style="color: var(--text-secondary); font-size: 1.1rem; font-weight: 500;">No se encontraron
                        coincidencias.</p>
                    <p style="color: var(--text-muted); font-size: 0.9rem;">Prueba con otro c贸digo o descripci贸n b谩sica.
                    </p>
                </div>

                <div id="welcomeMessage" style="padding: 4rem 2rem; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;"></div>
                    <p style="color: var(--text-secondary); font-size: 1.1rem; font-weight: 500;">Bienvenido al portal.
                    </p>
                    <p style="color: var(--text-muted); font-size: 0.9rem;">Ingresa un t茅rmino arriba para comenzar la
                        b煤squeda.</p>
                </div>
            </div>

            <footer class="card-footer">
                <span id="rowCount">Listo para buscar</span>
                <span>APIM v2.4</span>
            </footer>
        </main>
    </div>

    <!-- NIT Result Modal -->
    <div id="nitModal" class="modal">
        <div class="modal-content card">
            <div class="modal-header">
                <h2>Resultado de Consulta</h2>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalBody" class="modal-body">
                <!-- Content injected via JS -->
            </div>
            <div class="modal-footer">
                <button class="close-btn" onclick="closeModal()">Cerrar</button>
            </div>
        </div>
    </div>

    <script src="/static/app.js?v=1.1"></script>
</body>

</html>